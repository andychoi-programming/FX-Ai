{
  "mt5": {
    "login": 0,
    "password": "",
    "server": "",
    "timeout": 60000,
    "path": "",
    "_comment": "MT5 credentials loaded from .env file for security"
  },
  "trading": {
    "symbols": [
      "AUDUSD", "NZDUSD", "AUDJPY", "NZDJPY", "AUDNZD", "USDJPY"
    ],
    "risk_per_trade": 50.0,
    "risk_type": "fixed_dollar",
    "default_sl_pips": 20,
    "default_tp_pips": 60,
    "max_positions": 30,
    "max_spread": 3.0,
    "min_lot_size": 0.01,
    "max_lot_size": 1.0,
    "min_signal_strength": 0.250,
    "max_daily_loss": 500.0,
    "min_risk_reward_ratio": 3.0,
    "enable_news_filter": true,
    "enable_session_filter": true,
    "day_trading_only": false,
    "close_before_weekend": true,
    "close_on_shutdown": true,
    "prevent_multiple_positions_per_symbol": true,
    "dry_run": false,
    "trading_opportunity_check_interval_seconds": 120,
    "schedule_check_interval_seconds": 600,
    "magic_number": 123456,
    "order_type": "pending",
    "pending_order_distances": {
      "distance_type": "pips",
      "forex_min_pips": 10,
      "forex_max_pips": 20,
      "xauusd_min_pips": 25,
      "xauusd_max_pips": 50,
      "xagusd_min_pips": 10,
      "xagusd_max_pips": 20,
      "reanalysis_thresholds": {
        "forex_pips": 30,
        "xauusd_pips": 75,
        "xagusd_pips": 30
      },
      "reanalysis_actions": [
        "readjust_entry_sl_tp",
        "change_direction",
        "cancel_and_wait"
      ],
      "order_type": "stop",
      "_comment": "Distance type: 'pips' or 'percentage'. If distance exceeds reanalysis threshold, analysis folder performs re-evaluation"
    },
    "order_management": {
      "default_entry_strategy": "stop",
      "order_expiration_hours": 24,
      "pending_order_management": {
        "enabled": true,
        "check_interval_seconds": 60,
        "stale_order_threshold_hours": 1,
        "price_movement_cancel_threshold": 0.02,
        "max_pending_orders": 10,
        "cancel_stale_orders": true,
        "cancel_on_signal_change": true
      },
      "validation": {
        "pre_place_validation": true,
        "min_stop_distance_check": true,
        "price_position_validation": true
      },
      "fallback_strategies": {
        "market_fallback_enabled": true,
        "limit_fallback_enabled": false
      },
      "_comment": "Order management settings for stop orders, validation, and pending order monitoring"
    },
    "_comment_rules": "===== TRADING RULES - AI-DRIVEN TIMING ====="
  },
  "trading_rules": {
    "_description": "Consolidated trading rules for easy management",
    "position_limits": {
      "max_positions": 30,
      "max_positions_per_symbol": 1,
      "prevent_multiple_positions_per_symbol": true,
      "max_trades_per_symbol_per_day": 5,
      "_comment": "Increased to 25 trades per symbol per day for more active trading"
    },
    "time_restrictions": {
      "day_trading_only": false,
      "close_before_weekend": true,
      "close_on_shutdown": true,
      "trading_days_only": [
        0,
        1,
        2,
        3,
        4
      ],
      "avoid_market_open_close": true,
      "market_open_buffer_hours": 1,
      "market_close_buffer_hours": 2,
      "min_session_overlap": 2,
      "mt5_trading_times": {
        "mt5_open_time": "00:00",
        "mt5_trading_start": "00:00",
        "mt5_force_close_time": "23:55",
        "mt5_immediate_close_time": "23:58",
        "mt5_close_time": "23:59",
        "mt5_close_buffer_end": "23:59",
        "entry_cutoff_time": "00:00",
        "exit_cutoff_time": "23:55"
      },
      "forex_market_hours": {
        "weekend_start": "Friday 17:00 EST",
        "weekend_end": "Sunday 17:00 EST"
      },
      "trading_discipline": {
        "trading_days": [0, 1, 2, 3, 4],
        "trading_start_est": "00:00",
        "trading_end_est": "17:00"
      },
      "_comment": "AI-driven timing: Let the system learn optimal entry/exit times, Mon-Fri only, avoid volatile periods"
    },
    "risk_limits": {
      "risk_per_trade": 50.0,
      "risk_type": "fixed_dollar",
      "max_daily_loss": 500.0,
      "max_consecutive_losses": 3,
      "pause_after_losses": true,
      "max_daily_trades": 30,
      "_comment": "Fixed $50 risk per trade, max $500 daily loss, increased daily trades to match concurrent positions"
    },
    "position_sizing": {
      "min_lot_size": 0.01,
      "max_lot_size": 1.0,
      "risk_calculation_method": "pip_based",
      "margin_safety_factor": 0.95,
      "_comment": "Position size calculated to risk exactly $50 per trade"
    },
    "entry_rules": {
      "min_signal_strength": 0.35,
      "max_spread": 3.0,
      "min_risk_reward_ratio": 3.0,
      "require_ml_confirmation": false,
      "require_technical_confirmation": false,
      "_comment": "ML disabled temporarily while models rebuild. Re-enable after 24-48 hours of trading data collected."
    },
    "stop_loss_rules": {
      "method": "atr_based",
      "sl_atr_multiplier_major": 2.0,
      "sl_atr_multiplier_minor": 2.0,
      "sl_atr_multiplier_cross": 2.5,
      "sl_atr_multiplier_jpy": 2.5,
      "sl_atr_multiplier_gold": 1.5,
      "sl_atr_multiplier_silver": 2.0,
      "professional_minimums": {
        "EURUSD": 0.0010,
        "GBPUSD": 0.0015,
        "USDJPY": 0.15,
        "USDCHF": 0.0010,
        "AUDUSD": 0.0008,
        "NZDUSD": 0.0008,
        "USDCAD": 0.0010,
        "EURGBP": 0.0012,
        "EURAUD": 0.0015,
        "EURCAD": 0.0015,
        "EURCHF": 0.0012,
        "EURJPY": 0.20,
        "EURNZD": 0.0020,
        "GBPAUD": 0.0020,
        "GBPCAD": 0.0020,
        "GBPCHF": 0.0015,
        "GBPJPY": 0.25,
        "GBPNZD": 0.0025,
        "AUDCAD": 0.0012,
        "AUDCHF": 0.0012,
        "AUDJPY": 0.15,
        "AUDNZD": 0.0015,
        "NZDCAD": 0.0012,
        "NZDCHF": 0.0012,
        "NZDJPY": 0.15,
        "CADCHF": 0.0012,
        "CADJPY": 0.15,
        "CHFJPY": 0.20,
        "XAUUSD": 3.0,
        "XAGUSD": 0.30
      },
      "default_sl_pips": 15,
      "max_sl_pips": 50,
      "sl_adjustment_sentiment": true,
      "sl_adjustment_fundamental": true,
      "_comment": "Professional ATR multipliers and minimum stop distances for day trading standards"
    },
    "take_profit_rules": {
      "method": "rr_based",
      "tp_atr_multiplier_forex": 6.0,
      "tp_atr_multiplier_metals": 5.0,
      "default_tp_pips": 60,
      "tp_adjustment_sentiment": true,
      "tp_adjustment_fundamental": true,
      "extension_min_improvement_pips": 20,
      "rr_ratios": {
        "EURUSD": 2.5,
        "GBPUSD": 2.5,
        "USDJPY": 2.5,
        "USDCHF": 2.5,
        "AUDUSD": 2.5,
        "NZDUSD": 2.5,
        "USDCAD": 2.5,
        "EURGBP": 2.0,
        "EURAUD": 2.0,
        "EURCAD": 2.5,
        "EURCHF": 2.0,
        "EURJPY": 3.0,
        "EURNZD": 2.0,
        "GBPAUD": 2.0,
        "GBPCAD": 2.5,
        "GBPCHF": 2.5,
        "GBPJPY": 2.0,
        "GBPNZD": 1.5,
        "AUDCAD": 2.0,
        "AUDCHF": 2.0,
        "AUDJPY": 2.5,
        "AUDNZD": 2.0,
        "NZDCAD": 2.0,
        "NZDCHF": 2.0,
        "NZDJPY": 2.5,
        "CADCHF": 2.0,
        "CADJPY": 2.5,
        "CHFJPY": 2.5,
        "XAUUSD": 2.0,
        "XAGUSD": 1.5
      },
      "_comment": "Dynamic RR ratios by symbol for optimal risk-reward balance"
    },
    "exit_rules": {
      "trailing_stop_enabled": true,
      "trailing_activation_pips": 20,
      "trailing_distance_pips": 15,
      "breakeven_enabled": true,
      "breakeven_activation_pips": 15,
      "_comment": "Trailing stop activates at 20 pips profit, BE at 15 pips"
    },
    "cooldown_rules": {
      "symbol_cooldown_minutes": 5,
      "cooldown_after_loss": true,
      "_comment": "5-minute cooldown per symbol after closing a position"
    },
    "news_filter": {
      "enabled": true,
      "avoid_high_impact_news": true,
      "news_buffer_minutes": 60,
      "_comment": "Avoid trading 60 minutes before/after high-impact news"
    },
    "session_filter": {
      "enabled": true,
      "preferred_sessions": [
        "sydney",
        "tokyo",
        "london",
        "newyork",
        "overlap"
      ],
      "signal_thresholds": {
        "sydney": 0.300,
        "tokyo": 0.600,
        "london": 0.550,
        "newyork": 0.250,
        "overlap": 0.550,
        "none": 0.650
      },
      "require_overlap": false,
      "min_overlap_hours": 0,
      "avoid_thin_liquidity": false,
      "high_impact_news_buffer": 60,
      "_comment": "Require minimum 2-hour session overlap, avoid thin liquidity periods, 60min news buffer"
    }
  },
  "risk_management": {
    "mode": "fixed_dollar_risk",
    "fixed_risk_amount": 50.0,
    "risk_calculation_method": "pip_based",
    "stop_loss_method": "atr_based",
    "atr_multiplier": 2.0,
    "maximum_sl_pips": 50,
    "risk_reward_ratio": 3.0,
    "trailing_stop": {
      "enabled": true,
      "activation_pips": 20,
      "trail_distance_pips": 15
    },
    "breakeven": {
      "enabled": true,
      "activation_pips": 15
    },
    "position_sizing": {
      "method": "fixed_risk",
      "risk_per_trade_usd": 50.0,
      "max_position_size": 1.0,
      "use_kelly_criterion": false,
      "margin_safety_factor": 0.95
    },
    "daily_limits": {
      "max_daily_loss_usd": 500.0,
      "max_consecutive_losses": 3,
      "pause_after_losses": true,
      "max_daily_trades": 30
    },
    "risk_validation": {
      "metals_min_risk_pips": 50,
      "metals_max_risk_pips": 5000,
      "forex_min_risk_pips": 5,
      "forex_max_risk_pips": 500
    },
    "advanced_risk": {
      "enabled": true,
      "var_confidence_levels": [
        0.95,
        0.99,
        0.999
      ],
      "max_portfolio_var": 0.05,
      "max_correlation": 0.7,
      "risk_free_rate": 0.02,
      "min_sharpe_ratio": 0.5,
      "max_drawdown_limit": 0.2,
      "stress_test_scenarios": {
        "mild_stress": {
          "volatility_multiplier": 1.5,
          "correlation_shift": 0.2
        },
        "severe_stress": {
          "volatility_multiplier": 2.0,
          "correlation_shift": 0.4
        },
        "extreme_stress": {
          "volatility_multiplier": 3.0,
          "correlation_shift": 0.6
        }
      },
      "risk_parity": {
        "enabled": true,
        "rebalance_threshold": 0.05
      }
    },
    "anomaly_detection": {
      "enabled": true,
      "z_score_threshold": 3.0,
      "iqr_multiplier": 1.5,
      "mad_threshold": 3.5,
      "isolation_forest_contamination": 0.1,
      "ocsvm_nu": 0.1,
      "short_window": 20,
      "medium_window": 50,
      "long_window": 200,
      "max_anomaly_severity": 8.0,
      "halt_trading_threshold": 8.0,
      "reduce_position_threshold": 5.0,
      "increase_stops_threshold": 3.0
    }
  },
  "correlation": {
    "enabled": true,
    "strong_threshold": 0.8,
    "moderate_threshold": 0.6,
    "max_correlated_positions": 3,
    "size_multiplier": 0.5,
    "require_confirmation": false,
    "enable_dynamic_monitoring": true,
    "correlation_change_threshold": 0.15,
    "monitoring_interval_minutes": 5,
    "learning_enabled": true,
    "correlation_exit_threshold": 0.85,
    "correlation_entry_threshold": 0.4,
    "adaptive_thresholds": true,
    "diversification": {
      "max_currency_exposure": 0.8,
      "min_diversification_score": 0.6,
      "correlation_group_limit": 4,
      "currency_exposure_penalty": true
    },
    "known_relationships": {
      "positive_strong": [
        [
          "EURUSD",
          "GBPUSD"
        ],
        [
          "EURUSD",
          "EURGBP"
        ],
        [
          "EURUSD",
          "EURJPY"
        ],
        [
          "EURUSD",
          "EURCHF"
        ],
        [
          "GBPUSD",
          "GBPJPY"
        ],
        [
          "GBPUSD",
          "GBPCHF"
        ],
        [
          "AUDUSD",
          "NZDUSD"
        ],
        [
          "AUDUSD",
          "AUDNZD"
        ]
      ],
      "negative_strong": [
        [
          "USDCHF",
          "EURUSD"
        ],
        [
          "EURJPY",
          "USDJPY"
        ],
        [
          "USDCHF",
          "GBPUSD"
        ],
        [
          "USDJPY",
          "GBPUSD"
        ]
      ]
    },
    "_comment": "Advanced correlation-aware trading: dynamic monitoring, learning-based decisions, allows correlated pairs to trade simultaneously"
  },
  "indicators": {
    "vwap_period": 20,
    "ema_period": 20,
    "rsi_period": 14,
    "atr_period": 14,
    "use_support_resistance": true,
    "volume_analysis": true
  },
  "fundamental": {
    "myfxbook": {
      "enabled": true,
      "url": "https://www.myfxbook.com",
      "weight": 0.25,
      "update_interval": 300
    },
    "fxstreet": {
      "enabled": true,
      "url": "https://www.fxstreet.com",
      "weight": 0.25,
      "update_interval": 300
    },
    "fxblue": {
      "enabled": true,
      "url": "https://www.fxblue.com",
      "weight": 0.2,
      "update_interval": 300
    },
    "investing": {
      "enabled": true,
      "url": "https://www.investing.com",
      "weight": 0.2,
      "update_interval": 300
    },
    "forexclientsentiment": {
      "enabled": true,
      "url": "https://www.forexclientsentiment.com",
      "weight": 0.1,
      "update_interval": 600
    }
  },
  "ml": {
    "enabled": true,
    "adaptive_learning": true,
    "models": {
      "xgboost": {
        "enabled": true,
        "retrain_interval": 86400,
        "min_data_points": 1000,
        "max_depth": 6,
        "learning_rate": 0.1,
        "n_estimators": 100
      },
      "random_forest": {
        "enabled": true,
        "retrain_interval": 86400,
        "min_data_points": 1000,
        "n_estimators": 100,
        "max_depth": 10
      },
      "lstm": {
        "enabled": true,
        "retrain_interval": 172800,
        "min_data_points": 2000,
        "sequence_length": 50,
        "hidden_units": 64
      }
    },
    "ensemble_method": "weighted_average",
    "min_accuracy": 0.65,
    "backtest_period": 365,
    "walk_forward_window": 30,
    "retrain_interval_hours": 24,
    "min_trades_for_update": 50,
    "performance_window_days": 30,
    "adaptation_rate": 0.1,
    "immediate_learning_threshold": 5.0,
    "ensemble": {
      "enabled": true,
      "voting_method": "soft",
      "models": [
        "random_forest",
        "gradient_boosting",
        "xgboost",
        "lightgbm",
        "mlp"
      ]
    }
  },
  "adaptive_learning": {
    "enabled": true,
    "parameter_optimization": {
      "enabled": true,
      "interval_hours": 12,
      "method": "grid_search",
      "parameters": {
        "rsi_oversold": {
          "min": 20,
          "max": 40,
          "step": 5
        },
        "rsi_overbought": {
          "min": 60,
          "max": 80,
          "step": 5
        },
        "min_signal_strength": {
          "min": 0.5,
          "max": 0.8,
          "step": 0.05
        },
        "trailing_stop_distance": {
          "min": 15,
          "max": 30,
          "step": 5
        },
        "risk_multiplier": {
          "min": 0.8,
          "max": 1.5,
          "step": 0.1
        }
      }
    },
    "signal_weight_adjustment": {
      "enabled": true,
      "interval_hours": 4,
      "min_correlation": 0.1,
      "adaptation_speed": 0.1
    },
    "session_time_optimization": {
      "enabled": true,
      "interval_hours": 24,
      "min_trades_per_session": 10,
      "session_weights": {
        "sydney": 1.0,
        "tokyo": 1.0,
        "london": 1.0,
        "newyork": 1.0,
        "overlap": 1.0
      },
      "day_of_week_weights": {
        "monday": 1.0,
        "tuesday": 1.0,
        "wednesday": 1.0,
        "thursday": 1.0,
        "friday": 1.0
      },
      "hourly_weights": {
        "0": 1.0, "1": 1.0, "2": 1.0, "3": 1.0, "4": 1.0, "5": 1.0,
        "6": 1.0, "7": 1.0, "8": 1.0, "9": 1.0, "10": 1.0, "11": 1.0,
        "12": 1.0, "13": 1.0, "14": 1.0, "15": 1.0, "16": 1.0, "17": 1.0,
        "18": 1.0, "19": 1.0, "20": 1.0, "21": 1.0, "22": 1.0, "23": 1.0
      },
      "hourly_performance_tracking": true,
      "adaptation_rate": 0.05
    },
    "pattern_recognition": {
      "enabled": true,
      "min_pattern_occurrences": 10,
      "confidence_threshold": 0.7
    },
    "temporal_analysis": {
      "enabled": true,
      "confidence_threshold": 0.6,
      "min_trades_required": 20,
      "timeframes": {
        "daily": true,
        "weekly": true,
        "monthly": true,
        "yearly": true
      },
      "performance_weights": {
        "win_rate_weight": 0.4,
        "sharpe_ratio_weight": 0.4,
        "max_drawdown_weight": 0.2
      }
    },
    "market_regime": {
      "enabled": true,
      "adaptation_strength": 0.3,
      "history_length": 100,
      "regime_adx_trending": 25,
      "regime_adx_strong": 40,
      "regime_vol_high": 1.5,
      "regime_vol_low": 0.7,
      "regime_bull_threshold": 0.02,
      "regime_bear_threshold": -0.02,
      "regime_ma_short": 20,
      "regime_ma_medium": 50,
      "regime_ma_long": 200
    },
    "performance_thresholds": {
      "trigger_optimization": 0.55,
      "trigger_retraining": 0.6,
      "minimum_sharpe": 0.5,
      "maximum_drawdown": 0.2
    },
    "log_learning": {
      "enabled": true,
      "log_directory": "d:\\\\FX-Ai-Data\\\\logs",
      "auto_learn_from_logs": true,
      "last_processed_log_date": null
    }
  },
  "reinforcement_learning": {
    "enabled": true,
    "learning_rate": 0.1,
    "discount_factor": 0.95,
    "epsilon_start": 1.0,
    "epsilon_end": 0.01,
    "epsilon_decay": 0.995,
    "state_bins": {
      "rsi_bins": 10,
      "adx_bins": 8,
      "volatility_bins": 6,
      "trend_bins": 5,
      "regime_bins": 4
    },
    "reward_function": {
      "profit_weight": 1.0,
      "risk_weight": 0.5,
      "timing_weight": 0.3,
      "regime_weight": 0.2
    },
    "training": {
      "min_experiences": 1000,
      "batch_size": 32,
      "save_interval": 1000,
      "max_episodes": 10000
    },
    "actions": [
      "hold",
      "buy",
      "sell",
      "close_position"
    ],
    "state_features": [
      "rsi",
      "adx",
      "volatility_ratio",
      "trend_strength",
      "market_regime",
      "signal_strength",
      "position_status"
    ]
  },
  "advanced_feature_engineering": {
    "enabled": true,
    "categories": [
      "technical",
      "statistical",
      "time_series",
      "domain_specific",
      "interactions"
    ],
    "technical_params": {
      "rsi_periods": [
        7,
        14,
        21
      ],
      "macd_params": [
        [
          12,
          26,
          9
        ],
        [
          8,
          21,
          5
        ]
      ],
      "bb_periods": [
        20,
        30
      ],
      "bb_std": [
        2.0,
        2.5
      ],
      "stoch_params": [
        [
          14,
          3,
          3
        ],
        [
          21,
          5,
          5
        ]
      ],
      "williams_r_periods": [
        14,
        21
      ],
      "cci_periods": [
        14,
        20
      ],
      "mfi_periods": [
        14,
        21
      ],
      "adx_periods": [
        14,
        21
      ],
      "atr_periods": [
        14,
        21
      ],
      "ema_periods": [
        9,
        21,
        50,
        200
      ],
      "sma_periods": [
        10,
        20,
        50,
        100
      ]
    },
    "statistical_params": {
      "rolling_windows": [
        5,
        10,
        20,
        50
      ],
      "percentile_periods": [
        10,
        20
      ],
      "zscore_windows": [
        20,
        50
      ],
      "skewness_windows": [
        20,
        50
      ],
      "kurtosis_windows": [
        20,
        50
      ]
    },
    "domain_params": {
      "session_weights": {
        "london": 1.2,
        "new_york": 1.1,
        "tokyo": 1.0,
        "sydney": 0.9
      },
      "currency_pairs": [
        "EURUSD",
        "GBPUSD",
        "USDJPY",
        "AUDUSD",
        "USDCAD"
      ],
      "volatility_thresholds": [
        0.5,
        1.0,
        1.5,
        2.0
      ]
    },
    "selection_params": {
      "method": "mutual_info",
      "k_features": 50,
      "correlation_threshold": 0.95
    }
  },
  "system_health_monitoring": {
    "enabled": true,
    "monitoring_interval": 30,
    "metrics_history_size": 1000,
    "alert_cooldown": 300,
    "thresholds": {
      "memory_warning": 80.0,
      "memory_critical": 90.0,
      "cpu_warning": 70.0,
      "cpu_critical": 85.0,
      "disk_warning": 85.0,
      "disk_critical": 95.0,
      "api_response_warning": 5.0,
      "api_response_critical": 10.0,
      "error_rate_warning": 0.1,
      "error_rate_critical": 0.25,
      "max_consecutive_failures": 5
    }
  },
  "continuous_learning": {
    "enabled": true,
    "learning_only_mode": false,
    "monitor_market_conditions": true,
    "update_technical_indicators": true,
    "adaptive_parameter_tuning": true,
    "sentiment_analysis_update": true,
    "pattern_recognition_learning": true,
    "risk_model_calibration": true,
    "backtesting_during_downtime": false,
    "learning_frequency_minutes": 15,
    "max_learning_resources": 0.3,
    "_comment": "Enable continuous learning even when not trading - monitor markets, update models, improve algorithms"
  },
  "notifications": {
    "enabled": false,
    "email": "",
    "telegram_token": "",
    "telegram_chat_id": "",
    "notify_on_trade": true,
    "notify_on_learning": true,
    "notify_on_error": true
  },
  "logging": {
    "level": "INFO",
    "console_level": "WARNING",
    "file": "D:/FX-Ai-Data/logs/FX-Ai",
    "rotation_type": "time",
    "file_rotation": true,
    "max_file_size": 10485760,
    "backup_count": 5,
    "log_trades": true,
    "log_learning": true,
    "log_performance": true,
    "log_calculations": false,
    "_comment": "level: DEBUG/INFO/WARNING/ERROR, console_level for terminal output"
  },
  "fundamental_monitor": {
    "enabled": true,
    "check_interval_seconds": 300,
    "high_impact_exit_threshold": 15,
    "sl_tighten_threshold": 30,
    "sl_tighten_percentage": 0.5,
    "_comment": "Monitor fundamentals every 5 minutes. Exit if high-impact news within 15 mins, tighten SL if within 30 mins"
  },
  "_temporary_setting": {
    "note": "ML confirmation disabled temporarily to allow trading while models rebuild",
    "date": "2025-11-10T23:06:56.445842",
    "revert_after": "Models retrained (24-48 hours)",
    "revert_action": "Set require_ml_confirmation back to true"
  },
  "system": {
    "local_time_at_startup": "2025-11-12 00:55:02",
    "mt5_server_time": "2025-11-12 07:55:00+00:00",
    "time_offset_hours": 7,
    "_comment": "Computer local time and MT5 server time difference for reference"
  }
}
